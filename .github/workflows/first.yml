name: SmallTown Actions Test
on:
    push:
        branches:
            - master
jobs:
    my_first_job:
        name: Build_Site
        runs-on: ubuntu-18.04
        env:
            BUILD_FLAG: TRUE
        steps:
            - name: Checkout
              uses: actions/checkout@v2.4.0
            - name: Get commit message
              run: bash .github/workflows/test.sh $(git log -1 --pretty="%s")
            - name: Set BUILD_FLAG
              if: ${{ failure() }}
              env:
                BUILD_FLAG: FLASE
            - name: Use command set env
              run: CURRENT=`date +"%y_%m_%d %H:%M:%S"`
            #设置 node 环境
            - run: echo $CURRENT BUILDFLAG:$BUILD_FLAG
