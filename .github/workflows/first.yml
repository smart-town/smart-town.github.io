name: SmallTown Actions Test
on:
    push:
        branches:
            - master
jobs:
    my_first_job:
        name: Build_Site
        runs-on: ubuntu-latest
        env:
            BUILD_FLAG: TRUE
        steps:
            - name: Checkout
              uses: actions/checkout@v2.4.0
            - name: Get commit message
              id: judge_build_ornot
              run: echo "::set-output name=needbuild::$(bash .github/workflows/test.sh $(git log -1 --pretty='%s'))"
            #设置 node 环境
            - name: get steps.judge_build_ornot.outputs
              run: echo "OUTPUTS is：" "${{toJSON(steps.judge_build_ornot.outputs)}}"
              continue-on-error: true
            - name: test step context
              run: echo "${{toJSON(steps)}}"
              continue-on-error: true
            - name: Test github context
              run: echo "${{toJSON(github.event)}}"
              continue-on-error: true
            - name: Test use outputs
              continue-on-error: true
              if: contains(steps.judge_build_ornot.outputs.needbuild, "not need")
              run: echo "PERPARE EXECUTE."