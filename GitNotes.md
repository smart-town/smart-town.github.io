# USE GIT .. Study

## 撤销操作

在任何一个阶段你都有可能想要撤销某些操作。这里有一些撤销你所修改的基本工具。但是要注意的是，有些撤销操作是不可逆的，这是在使用Git的过程中为数不多的，会因为操作失误而导致之前的工作丢失的少有的几个地方之一。

有时候我们提交完了才会发现漏掉了几个文件没有添加或者提交信息写错了，此时可以运行`git commit --amend`尝试重新提交。这个命令会将暂存区中的文件提交。如果自上次提交以来还未做任何更改，那么快照会保持不变，而你所做的修改只是提交信息。文本编辑器启动后可以看到之前的比较新西，编辑保存会覆盖原来的提交信息。

例如，当你提交后发现忘记暂存某些需要的修改：

```shell
git commit -m "initial commit"
git add forgotten_file
git commit --amend
```

最终你只会有一个提交——第二次提交将代替第一次提交的结果。

## 取消暂存的文件

关于操作暂存区域与工作目录中已经修改的文件。这些命令在修改文件状态的同时，也会提示如何撤销操作。例如已经修改了两个文件并且想要将它们作为两次独立的修改提交，但是却意外输入了`git add *`暂存了他们俩两个，如何只取消暂存两个中的一个呢？`git satus`命令已经提示了：`git reset HEAD filename2.md`。【注意】调用该命令时加上--hard选项可能会让git reset 成为一个危险的命令（会让工作目录中所有当前进度丢失），不加选项地调用`git reset`并不危险，它只会修改暂存区域。

## 撤销对文件的修改

如果并不相保留对某个文件的修改。如何方便地撤销修改呢》将它还原为上次提交时的样子，或者刚克隆完时的样子，或者刚把他放入工作目录时的样子。`git status`也提示了如何做。`git checkout -- filename`就会对所做修改进行撤销。【注意】该条命令十分危险，你对该文件的任何修改都会消失，你只是拷贝了另一个文件来覆盖它。除非你确实清楚不需要这个文件了，否则不要使用这个命令。

如果你仍然想保留对那个文件作出的修改，但是现在仍然需要撤销，通过 Git 分支进行保存进度是更好的做法。

**注意**在Git中任何已经提交的东西几乎总是可以恢复，甚至那些被删除的分支中的提交或使用--amend选项覆盖的提交也可以会发。然而，任何你未提交的东西丢失后可能再也找不到了

## 远程仓库的使用

为了能够在任意的Git项目上协作，需要知道如何管理自己的远程仓库。远程仓库是指托管在因特网或者其他网络中的你的项目的版本库。你可以有好几个远程仓库，通常有些仓库对你只读，有些可以读写。与其他人协作涉及管理远程仓库以及根据需要推送或者拉去数据。管理远程仓库包括了解如何添加远程仓库、移除无效仓库、管理不同的远程分支并定义它们是否被跟踪等。

### 查看远程仓库

如果想要查看已经配置的远程仓库服务器，可以运行`git remote`命令，它会列出你指定的每一个远程服务器的简写。如果你已经克隆了自己的仓库，那么至少能看到`origin-`这是Git给你克隆的仓库服务器的默认名字。也可以指定选项 -v，会显示需要读写远程仓库使用的Git保存的简写与对应的URL。

如果你的远程仓库不止一个该命令会将它们全部列出来，如几个协作者合作的。这样可以轻松拉取其中任何一个用户的贡献。此外，我们还会有某些远程仓库的推送权限。

### 添加远程仓库

`git remote add <shortname> <url>`添加一个新的远程git仓库，同事可以指定一个你可以轻松引用的简写。

```shell
git remote add pd https://github.com/...
```

现在就可以在命令行中使用字符串pd来代表整个URL。例如你想拉去仓库中有但是你没有的信息，可以用`git fetch pd`

### 从远程仓库中抓取与拉取

`git fetch [remote-name]`这个命令访问远程仓库，从中拉取你所没有的数据。执行完成后，你讲拥有那个远程仓库中所有分支的引用，可以随时合并或者查看。如果使用clone克隆了一个仓库，命令会自动将其添加为远程仓库并默认为`origin`为简写。所以`git fetch origin`会抓取克隆后新推送的所有工作。必须注意`git fetch`**将拉取数据到本地仓库，但是它并不会合并或修改你当前的工作**。当准备好的时候你必须手动地将其合并入你的工作。如果你有一个分支设置为跟踪一个远程分支，可以使用`git pull`命令来自动的抓取然后合并远程分支到当前分支。这可能是一个更简单的工作流程：默认情况下，git clone会自动设置本地 master 分支跟踪克隆的远程仓库的master分支（或不管是什么名字的默认分支），运行`git pull`通常会从最初克隆的服务器上抓取数据并自动尝试合并到当前所在的分支。

### 推送到远程仓库

当要分享你的项目时，必须将其推送到上游。`git push [remote-name] [branch-name]`。当你要将master分支推送到origin服务器上时（再次说明克隆时通常会自动帮助你设置好这两个名字），那么运行这个命令就可以将所做的备份到服务器：`git push origin master`。只有当你有所克隆服务器的写入权限并且之前没有人推送过时，这条命令才生效。当你和其他人在同一时间克隆，他们先推送到上游然后你再推送到上游，那么你的推送将毫无疑问地被拒绝。你必须先将他们的工作拉取下来并将其合并到你的工作后才能推送。

### 查看远程仓库

如果想要查看某一个远程仓库的更多信息，可以使用`git remote show [remote-name]`命令。它会列出远程仓库的URL与跟踪分支的信息。这些信息非常有用。

### 远程仓库的移除和重命名

如果想要重命名引用的名字可以运行`git remote rename`去修改一个远程仓库的简写名。如 origin 重新命名：`git remote rename origin oi`。值得注意的是这同样也会修改你的远程分支名字。那些过去引用`origin/master`的现在会引用`oi/master`。

如果因为一些原因想要移除一个远程仓库，可以使用`git remote rm`如：`git remote rm oi`。

## 打标签

像其他版本控制系统一样，Git 可以给历史中的某一个提交打上标签以示重要。比较有代表性的是人们会使用这个功能来标记发布结点。v1.0等。

### 列出标签

`git tag`。这个命令以字母顺序列出标签。也可以使用特定的模式查找：`git tag -l 'v1.8.5*'`

### 创建标签

Git使用两种主要类型的标签：轻量标签和附注标签。一个轻量标签很像一个不会改变的分支，它只是一个特定提交的引用。然而附注标签是存储在Git数据库中一个完整的对象。它们是可以被校验的。其中包含打标签者的名字、电子邮件地址、日期时间；还有一个标签信息。通常建议创建附注标签，这样你可以拥有以上所有信息；但是如果你只是想用一个临时的标签轻量标签也是可以使用的。

附注标签：`git tag -a v1.4 -m 'my version 1.4'`,通过使用`git show`可以看到标签信息与其对应的提交：`git show v1.4`。

轻量标签：`git tag v1.4-lw`

**后期打标签**:`git tag -a v1.2 9fceb02`。即需要指定部分校验和。

## 共享标签

默认情况下,git push并不会传送标签到远程仓库。在创建完标签后必须显式推送标签到共享服务器上。这个过程就像共享远程分支一样：`git push origin [tagname]`。如果一次推送很多，也可以使用`git push origin --tags`将会把所有不在远程仓库服务器上的标签全部传送到那里。

## 检出标签

