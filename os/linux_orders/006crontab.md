# cron 定时任务

## 简介

crontab 是 Linux 下常用的定时执行工具.通过该命令,我们可以在指定的时间执行想要执行的命令. 

*小记*,我之所以用到是因为需要**定时**自动更新`clash`的配置文件.

## 基本命令

- `crontab -l`: 查看定时执行任务列表
- `crontab -e`: 编辑定时任务
- `crontab -r`: 删除定时任务
- `service crond start`: 启动服务

## 基本格式语法

`minute hour day month day_of_week command`

示例:`0 1 * * * /root/bakeup.sh` 表示:每天凌晨 1:00 执行备份程序.

- miniute: 0~59
- hour: 0~23
- day: 1~31
- month: 1~12
- week: 0~7(0或7表示周日)

### 操作符
用来实现复杂时间设定:    

- `*` 表示取值范围内所有数字
- `/` 每过多少数字,代表每隔多长时间(步进)
- `-` 从 X 到 Y,代表一段时间范围
- `,` 分割开多个值

### 典型示例

- `* * * * *` 每分钟执行一次
- `3,15 * * * *` 每小时的第 3 和第 15 分钟执行一次
- `3,15 8-11 * * *` 每天 8 点到 11 点的第 3 和第 15 分钟执行一次
- `3,15 8-11 */2 * *` 每隔两天的 8 点到 11 点的第 3 和 15 分钟执行一次
- `3,15 8-11 * * 1` 每周一执行

## 环境变量设置

### 修改 crontab 文件

直接修改`/etc/crontab`文件，在前面引入对应的环境变量

### 在命令中设置变量

设置命令时，加入设置变量的命令，如：`* 2 * * * source $HOME/.bash_profile && /path/to/order & > /dev/null 2>&1`
